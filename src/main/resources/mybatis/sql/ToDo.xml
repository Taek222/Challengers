<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.ord//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.challengers.mvc.repository.ToDoRepository">

    <select id="getTodayToDo" parameterType="kr.co.challengers.mvc.parameter.ToDoRequestParameter" resultType="hashmap">
        SELECT
                TODO_ID
                , TITLE
                , CRE_DT
                , REG_USER
                , MOD_DT
                , MOD_USER
        FROM    TB_TODO_MGMT
        <where> REG_USER = #{userId}
            and     DEL_YN = 'N'
            AND     DATE_FORMAT(EXEC_DT, '%Y-%m-%d') = CURRENT_DATE()
            <if test="@org.apache.commons.lang3.ObjectUtils@isNotEmpty(status)">
                AND STATUS = #{status}
            </if>
        </where>
    </select>

</mapper>